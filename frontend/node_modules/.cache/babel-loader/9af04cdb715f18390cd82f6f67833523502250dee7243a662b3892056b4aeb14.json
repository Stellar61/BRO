{"ast":null,"code":"import React,{useState}from\"react\";import RouteInput from\"./components/RouteInput\";import RouteMap from\"./components/RouteMap\";import RouteList from\"./components/RouteList\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[optimizedRoute,setOptimizedRoute]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");// Use 127.0.0.1 instead of localhost - more reliable\n// const BACKEND_URL = \"http://127.0.0.1:8000\";\nconst BACKEND_URL=process.env.REACT_APP_BACKEND_URL||\"https://bro-backend-app.azurewebsites.net\";const handleOptimize=async routeNo=>{setLoading(true);setError(\"\");setOptimizedRoute(null);try{console.log(\"\\uD83D\\uDD04 Optimizing route \".concat(routeNo,\"...\"));const response=await fetch(\"\".concat(BACKEND_URL,\"/optimize\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({route_no:parseInt(routeNo)})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||\"HTTP error! status: \".concat(response.status));}const data=await response.json();console.log(\"‚úÖ Optimization successful:\",data);setOptimizedRoute(data);}catch(err){console.error(\"‚ùå Optimization failed:\",err);setError(err.message);}finally{setLoading(false);}};// Test backend connection on component mount\nReact.useEffect(()=>{const testBackend=async()=>{try{const response=await fetch(\"\".concat(BACKEND_URL,\"/\"));if(response.ok){console.log(\"‚úÖ Backend connection successful\");}}catch(err){console.warn(\"‚ö†Ô∏è Backend connection test failed:\",err.message);}};testBackend();},[BACKEND_URL]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDE8C Bus Route Optimizer\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Enter a route number to find the optimized bus route\"}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"0.9rem\",opacity:0.8},children:[\"Backend: \",BACKEND_URL,\" \",optimizedRoute?\"‚úÖ Connected\":\"‚ö†Ô∏è Checking...\"]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"app-main\",children:[/*#__PURE__*/_jsx(RouteInput,{onOptimize:handleOptimize,loading:loading}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[\"\\u274C \",error,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Make sure the backend is running on \",BACKEND_URL]})]}),optimizedRoute&&/*#__PURE__*/_jsxs(\"div\",{className:\"results-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"route-summary\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Route \",optimizedRoute.route_no,\" - Optimized Path\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[\"\\uD83D\\uDCCF Total Distance:\",\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[optimizedRoute.total_distance_km,\" km\"]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[\"\\u23F1\\uFE0F Estimated Time:\",\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[optimizedRoute.estimated_time_min,\" min\"]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[\"\\uD83D\\uDED1 Total Stops:\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:optimizedRoute.optimized_order.length})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-layout\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:/*#__PURE__*/_jsx(RouteMap,{stops:optimizedRoute.optimized_order})}),/*#__PURE__*/_jsx(\"div\",{className:\"list-container\",children:/*#__PURE__*/_jsx(RouteList,{stops:optimizedRoute.optimized_order})})]})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","RouteInput","RouteMap","RouteList","jsx","_jsx","jsxs","_jsxs","App","optimizedRoute","setOptimizedRoute","loading","setLoading","error","setError","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","handleOptimize","routeNo","console","log","concat","response","fetch","method","headers","body","JSON","stringify","route_no","parseInt","ok","errorData","json","Error","status","data","err","message","useEffect","testBackend","warn","className","children","style","fontSize","opacity","onOptimize","total_distance_km","estimated_time_min","optimized_order","length","stops"],"sources":["C:/BRO/frontend/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport RouteInput from \"./components/RouteInput\";\r\nimport RouteMap from \"./components/RouteMap\";\r\nimport RouteList from \"./components/RouteList\";\r\nimport \"./App.css\";\r\n\r\nfunction App() {\r\n  const [optimizedRoute, setOptimizedRoute] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // Use 127.0.0.1 instead of localhost - more reliable\r\n  // const BACKEND_URL = \"http://127.0.0.1:8000\";\r\n  const BACKEND_URL =\r\n    process.env.REACT_APP_BACKEND_URL ||\r\n    \"https://bro-backend-app.azurewebsites.net\";\r\n\r\n  const handleOptimize = async (routeNo) => {\r\n    setLoading(true);\r\n    setError(\"\");\r\n    setOptimizedRoute(null);\r\n\r\n    try {\r\n      console.log(`üîÑ Optimizing route ${routeNo}...`);\r\n\r\n      const response = await fetch(`${BACKEND_URL}/optimize`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ route_no: parseInt(routeNo) }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(\r\n          errorData.error || `HTTP error! status: ${response.status}`\r\n        );\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log(\"‚úÖ Optimization successful:\", data);\r\n      setOptimizedRoute(data);\r\n    } catch (err) {\r\n      console.error(\"‚ùå Optimization failed:\", err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Test backend connection on component mount\r\n  React.useEffect(() => {\r\n    const testBackend = async () => {\r\n      try {\r\n        const response = await fetch(`${BACKEND_URL}/`);\r\n        if (response.ok) {\r\n          console.log(\"‚úÖ Backend connection successful\");\r\n        }\r\n      } catch (err) {\r\n        console.warn(\"‚ö†Ô∏è Backend connection test failed:\", err.message);\r\n      }\r\n    };\r\n    testBackend();\r\n  }, [BACKEND_URL]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"app-header\">\r\n        <h1>üöå Bus Route Optimizer</h1>\r\n        <p>Enter a route number to find the optimized bus route</p>\r\n        <p style={{ fontSize: \"0.9rem\", opacity: 0.8 }}>\r\n          Backend: {BACKEND_URL}{\" \"}\r\n          {optimizedRoute ? \"‚úÖ Connected\" : \"‚ö†Ô∏è Checking...\"}\r\n        </p>\r\n      </header>\r\n\r\n      <main className=\"app-main\">\r\n        <RouteInput onOptimize={handleOptimize} loading={loading} />\r\n\r\n        {error && (\r\n          <div className=\"error-message\">\r\n            ‚ùå {error}\r\n            <br />\r\n            <small>Make sure the backend is running on {BACKEND_URL}</small>\r\n          </div>\r\n        )}\r\n\r\n        {optimizedRoute && (\r\n          <div className=\"results-container\">\r\n            <div className=\"route-summary\">\r\n              <h2>Route {optimizedRoute.route_no} - Optimized Path</h2>\r\n              <div className=\"stats\">\r\n                <span className=\"stat\">\r\n                  üìè Total Distance:{\" \"}\r\n                  <strong>{optimizedRoute.total_distance_km} km</strong>\r\n                </span>\r\n                <span className=\"stat\">\r\n                  ‚è±Ô∏è Estimated Time:{\" \"}\r\n                  <strong>{optimizedRoute.estimated_time_min} min</strong>\r\n                </span>\r\n                <span className=\"stat\">\r\n                  üõë Total Stops:{\" \"}\r\n                  <strong>{optimizedRoute.optimized_order.length}</strong>\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"results-layout\">\r\n              <div className=\"map-container\">\r\n                <RouteMap stops={optimizedRoute.optimized_order} />\r\n              </div>\r\n              <div className=\"list-container\">\r\n                <RouteList stops={optimizedRoute.optimized_order} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}