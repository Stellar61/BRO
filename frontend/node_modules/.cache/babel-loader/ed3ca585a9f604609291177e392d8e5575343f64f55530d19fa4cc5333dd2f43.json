{"ast":null,"code":"import React,{useState}from\"react\";import RouteMap from\"./RouteMap\";import RouteList from\"./RouteList\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[routeNo,setRouteNo]=useState(\"\");const[optimizedRoute,setOptimizedRoute]=useState(null);const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);const backendUrl=\"https://bro-backend-app.azurewebsites.net\";const handleOptimize=async()=>{setLoading(true);setError(\"\");setOptimizedRoute(null);try{const response=await fetch(\"\".concat(backendUrl,\"/optimize\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({route_no:routeNo.trim()})});const data=await response.json();if(!response.ok){throw new Error(data.detail||\"Failed to fetch route\");}setOptimizedRoute(data);}catch(err){console.error(err);setError(err.message||\"Something went wrong\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"\\uD83D\\uDE8D Bus Route Optimizer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:routeNo,onChange:e=>setRouteNo(e.target.value),placeholder:\"Enter bus route number (e.g. 1B, 40C)\",className:\"route-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleOptimize,disabled:!routeNo||loading,children:loading?\"Optimizing...\":\"Optimize Route\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),optimizedRoute&&/*#__PURE__*/_jsx(\"div\",{className:\"results-container\",children:optimizedRoute.removed_stops&&optimizedRoute.removed_stops.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"removed-route\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u274C Route \",optimizedRoute.route_no,\" Removed\"]}),/*#__PURE__*/_jsx(\"p\",{children:optimizedRoute.message}),/*#__PURE__*/_jsxs(\"div\",{className:\"removed-list\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Removed Stops:\"}),/*#__PURE__*/_jsx(\"ul\",{children:optimizedRoute.removed_stops.map((stop,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83D\\uDE8C\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:stop.stop_name||stop[\"Boarding Point\"]}),\" \",\"\\u2014 \",stop.students_per_stop,\" students\"]},i))})]})]}):/*#__PURE__*//* Case 2: Valid Optimized Route */_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"route-summary\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u2705 Route \",optimizedRoute.route_no,\" - Optimized Path\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[\"\\uD83D\\uDCCF \",/*#__PURE__*/_jsxs(\"strong\",{children:[optimizedRoute.total_distance_km,\" km\"]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[\"\\u23F1\\uFE0F \",/*#__PURE__*/_jsxs(\"strong\",{children:[optimizedRoute.estimated_time_min,\" min\"]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[\"\\uD83D\\uDED1 \",/*#__PURE__*/_jsx(\"strong\",{children:optimizedRoute.optimized_order.length}),\" \",\"stops\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-layout\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:/*#__PURE__*/_jsx(RouteMap,{stops:optimizedRoute.optimized_order})}),/*#__PURE__*/_jsx(\"div\",{className:\"list-container\",children:/*#__PURE__*/_jsx(RouteList,{stops:optimizedRoute.optimized_order})})]})]})})]});}export default App;","map":{"version":3,"names":["React","useState","RouteMap","RouteList","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","routeNo","setRouteNo","optimizedRoute","setOptimizedRoute","error","setError","loading","setLoading","backendUrl","handleOptimize","response","fetch","concat","method","headers","body","JSON","stringify","route_no","trim","data","json","ok","Error","detail","err","console","message","className","children","type","value","onChange","e","target","placeholder","onClick","disabled","removed_stops","length","map","stop","i","stop_name","students_per_stop","total_distance_km","estimated_time_min","optimized_order","stops"],"sources":["C:/BRO/frontend/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport RouteMap from \"./RouteMap\";\r\nimport RouteList from \"./RouteList\";\r\nimport \"./App.css\";\r\n\r\nfunction App() {\r\n  const [routeNo, setRouteNo] = useState(\"\");\r\n  const [optimizedRoute, setOptimizedRoute] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const backendUrl = \"https://bro-backend-app.azurewebsites.net\";\r\n\r\n  const handleOptimize = async () => {\r\n    setLoading(true);\r\n    setError(\"\");\r\n    setOptimizedRoute(null);\r\n\r\n    try {\r\n      const response = await fetch(`${backendUrl}/optimize`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ route_no: routeNo.trim() }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.detail || \"Failed to fetch route\");\r\n      }\r\n\r\n      setOptimizedRoute(data);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(err.message || \"Something went wrong\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <h1 className=\"title\">üöç Bus Route Optimizer</h1>\r\n\r\n      <div className=\"input-container\">\r\n        <input\r\n          type=\"text\"\r\n          value={routeNo}\r\n          onChange={(e) => setRouteNo(e.target.value)}\r\n          placeholder=\"Enter bus route number (e.g. 1B, 40C)\"\r\n          className=\"route-input\"\r\n        />\r\n        <button onClick={handleOptimize} disabled={!routeNo || loading}>\r\n          {loading ? \"Optimizing...\" : \"Optimize Route\"}\r\n        </button>\r\n      </div>\r\n\r\n      {error && <p className=\"error\">{error}</p>}\r\n\r\n      {optimizedRoute && (\r\n        <div className=\"results-container\">\r\n          {/* Case 1: Route Removed (<= 15 students) */}\r\n          {optimizedRoute.removed_stops &&\r\n          optimizedRoute.removed_stops.length > 0 ? (\r\n            <div className=\"removed-route\">\r\n              <h2>‚ùå Route {optimizedRoute.route_no} Removed</h2>\r\n              <p>{optimizedRoute.message}</p>\r\n              <div className=\"removed-list\">\r\n                <h3>Removed Stops:</h3>\r\n                <ul>\r\n                  {optimizedRoute.removed_stops.map((stop, i) => (\r\n                    <li key={i}>\r\n                      üöå{\" \"}\r\n                      <strong>\r\n                        {stop.stop_name || stop[\"Boarding Point\"]}\r\n                      </strong>{\" \"}\r\n                      ‚Äî {stop.students_per_stop} students\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            /* Case 2: Valid Optimized Route */\r\n            <>\r\n              <div className=\"route-summary\">\r\n                <h2>‚úÖ Route {optimizedRoute.route_no} - Optimized Path</h2>\r\n                <div className=\"stats\">\r\n                  <span className=\"stat\">\r\n                    üìè <strong>{optimizedRoute.total_distance_km} km</strong>\r\n                  </span>\r\n                  <span className=\"stat\">\r\n                    ‚è±Ô∏è <strong>{optimizedRoute.estimated_time_min} min</strong>\r\n                  </span>\r\n                  <span className=\"stat\">\r\n                    üõë <strong>{optimizedRoute.optimized_order.length}</strong>{\" \"}\r\n                    stops\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"results-layout\">\r\n                <div className=\"map-container\">\r\n                  <RouteMap stops={optimizedRoute.optimized_order} />\r\n                </div>\r\n                <div className=\"list-container\">\r\n                  <RouteList stops={optimizedRoute.optimized_order} />\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}