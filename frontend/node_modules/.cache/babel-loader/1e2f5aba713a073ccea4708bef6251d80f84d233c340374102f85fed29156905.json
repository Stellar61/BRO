{"ast":null,"code":"import React,{useState}from\"react\";import RouteMap from\"./components/RouteMap\";import RouteList from\"./components/RouteList\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _optimizedRoute$remov;const[routeNo,setRouteNo]=useState(\"\");const[optimizedRoute,setOptimizedRoute]=useState(null);const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);// ‚úÖ Fix: Use environment variable for backend\nconst backendUrl=process.env.REACT_APP_BACKEND_URL||\"https://bro-backend-app.azurewebsites.net\";const handleOptimize=async()=>{setLoading(true);setError(\"\");setOptimizedRoute(null);try{// ‚úÖ Fix: Encode route number to handle letters like 1B, 40C\nconst response=await fetch(\"\".concat(backendUrl,\"/optimize\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({route_no:routeNo.trim()})});const data=await response.json();if(!response.ok)throw new Error(data.detail||\"Failed to fetch route\");setOptimizedRoute(data);}catch(err){console.error(\"Error:\",err);setError(\"Unable to fetch data. Please check connection or backend.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDE8D Bus Route Optimizer\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Plan and visualize optimized routes for Rajalakshmi Engineering College\"})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"app-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"route-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:routeNo,onChange:e=>setRouteNo(e.target.value),placeholder:\"Enter bus route number (e.g. 1B, 40C)\",className:\"route-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleOptimize,disabled:!routeNo||loading,children:loading?\"Optimizing...\":\"Optimize Route\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),optimizedRoute&&/*#__PURE__*/_jsx(\"div\",{className:\"results-container\",children:((_optimizedRoute$remov=optimizedRoute.removed_stops)===null||_optimizedRoute$remov===void 0?void 0:_optimizedRoute$remov.length)>0?/*#__PURE__*/_jsxs(\"div\",{className:\"removed-route\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u274C Route \",optimizedRoute.route_no,\" Removed\"]}),/*#__PURE__*/_jsx(\"p\",{children:optimizedRoute.message}),/*#__PURE__*/_jsxs(\"div\",{className:\"removed-list\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Removed Stops:\"}),/*#__PURE__*/_jsx(\"ul\",{children:optimizedRoute.removed_stops.map((stop,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83D\\uDE8C \",stop.stop_name||stop[\"Boarding Point\"],\" \\u2014\",\" \",stop.students_per_stop,\" students\"]},i))})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"route-summary\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u2705 Route \",optimizedRoute.route_no,\" - Optimized Path\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[\"\\uD83D\\uDCCF \",/*#__PURE__*/_jsxs(\"strong\",{children:[optimizedRoute.total_distance_km,\" km\"]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[\"\\u23F1\\uFE0F\",\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[optimizedRoute.estimated_time_min,\" min\"]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[\"\\uD83D\\uDED1\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:optimizedRoute.optimized_order.length}),\" \",\"stops\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-layout\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:/*#__PURE__*/_jsx(RouteMap,{stops:optimizedRoute.optimized_order})}),/*#__PURE__*/_jsx(\"div\",{className:\"list-container\",children:/*#__PURE__*/_jsx(RouteList,{stops:optimizedRoute.optimized_order})})]})]})})]})]});}export default App;","map":{"version":3,"names":["React","useState","RouteMap","RouteList","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","_optimizedRoute$remov","routeNo","setRouteNo","optimizedRoute","setOptimizedRoute","error","setError","loading","setLoading","backendUrl","process","env","REACT_APP_BACKEND_URL","handleOptimize","response","fetch","concat","method","headers","body","JSON","stringify","route_no","trim","data","json","ok","Error","detail","err","console","className","children","type","value","onChange","e","target","placeholder","onClick","disabled","removed_stops","length","message","map","stop","i","stop_name","students_per_stop","total_distance_km","estimated_time_min","optimized_order","stops"],"sources":["C:/BRO/frontend/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport RouteMap from \"./components/RouteMap\";\r\nimport RouteList from \"./components/RouteList\";\r\nimport \"./App.css\";\r\n\r\nfunction App() {\r\n  const [routeNo, setRouteNo] = useState(\"\");\r\n  const [optimizedRoute, setOptimizedRoute] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // ‚úÖ Fix: Use environment variable for backend\r\n  const backendUrl =\r\n    process.env.REACT_APP_BACKEND_URL ||\r\n    \"https://bro-backend-app.azurewebsites.net\";\r\n\r\n  const handleOptimize = async () => {\r\n    setLoading(true);\r\n    setError(\"\");\r\n    setOptimizedRoute(null);\r\n\r\n    try {\r\n      // ‚úÖ Fix: Encode route number to handle letters like 1B, 40C\r\n      const response = await fetch(`${backendUrl}/optimize`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ route_no: routeNo.trim() }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (!response.ok) throw new Error(data.detail || \"Failed to fetch route\");\r\n\r\n      setOptimizedRoute(data);\r\n    } catch (err) {\r\n      console.error(\"Error:\", err);\r\n      setError(\"Unable to fetch data. Please check connection or backend.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"app-header\">\r\n        <h1>üöç Bus Route Optimizer</h1>\r\n        <p>\r\n          Plan and visualize optimized routes for Rajalakshmi Engineering\r\n          College\r\n        </p>\r\n      </header>\r\n\r\n      <main className=\"app-main\">\r\n        <div className=\"route-input-container\">\r\n          <input\r\n            type=\"text\"\r\n            value={routeNo}\r\n            onChange={(e) => setRouteNo(e.target.value)}\r\n            placeholder=\"Enter bus route number (e.g. 1B, 40C)\"\r\n            className=\"route-input\"\r\n          />\r\n          <button onClick={handleOptimize} disabled={!routeNo || loading}>\r\n            {loading ? \"Optimizing...\" : \"Optimize Route\"}\r\n          </button>\r\n        </div>\r\n\r\n        {error && <div className=\"error-message\">{error}</div>}\r\n\r\n        {optimizedRoute && (\r\n          <div className=\"results-container\">\r\n            {optimizedRoute.removed_stops?.length > 0 ? (\r\n              <div className=\"removed-route\">\r\n                <h2>‚ùå Route {optimizedRoute.route_no} Removed</h2>\r\n                <p>{optimizedRoute.message}</p>\r\n                <div className=\"removed-list\">\r\n                  <h3>Removed Stops:</h3>\r\n                  <ul>\r\n                    {optimizedRoute.removed_stops.map((stop, i) => (\r\n                      <li key={i}>\r\n                        üöå {stop.stop_name || stop[\"Boarding Point\"]} ‚Äî{\" \"}\r\n                        {stop.students_per_stop} students\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <div className=\"route-summary\">\r\n                  <h2>‚úÖ Route {optimizedRoute.route_no} - Optimized Path</h2>\r\n                  <div className=\"stats\">\r\n                    <span className=\"stat\">\r\n                      üìè <strong>{optimizedRoute.total_distance_km} km</strong>\r\n                    </span>\r\n                    <span className=\"stat\">\r\n                      ‚è±Ô∏è{\" \"}\r\n                      <strong>{optimizedRoute.estimated_time_min} min</strong>\r\n                    </span>\r\n                    <span className=\"stat\">\r\n                      üõë{\" \"}\r\n                      <strong>{optimizedRoute.optimized_order.length}</strong>{\" \"}\r\n                      stops\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"results-layout\">\r\n                  <div className=\"map-container\">\r\n                    <RouteMap stops={optimizedRoute.optimized_order} />\r\n                  </div>\r\n                  <div className=\"list-container\">\r\n                    <RouteList stops={optimizedRoute.optimized_order} />\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}